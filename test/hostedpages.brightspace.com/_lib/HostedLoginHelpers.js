(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){var helperMethods=require("./HostedLoginHelpersImplementation.js");Object.keys(helperMethods).forEach(function(k){window[k]=helperMethods[k]});var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var script=scripts[i];if(script.src==="https://hostedpages.brightspace.com/_lib/HostedLoginHelpers.js"||script.src==="https://preview.hostedpages.brightspace.com/_lib/HostedLoginHelpers.js"){eval(script.innerHTML)}}helperMethods.handleASPTarget({"index.asp":""});helperMethods.insertFavicon();helperMethods.navigateIfAuthenticated()},{"./HostedLoginHelpersImplementation.js":2}],2:[function(require,module,exports){function getUrlParams(){var match,plus=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(plus," "))},query=window.location.search.substring(1);params={};while(match=search.exec(query)){params[decode(match[1])]=decode(match[2])}return params}function createQueryString(decodedUrlParams){if(!decodedUrlParams){decodedUrlParams=getUrlParams()}var first=true,query="";for(var param in decodedUrlParams){if(first){query="?";first=false}else{query=query+"&"}query=query+encodeURIComponent(param)+"="+encodeURIComponent(decodedUrlParams[param])}return query}function handleLogin(username,password){var queryString=createQueryString();var fullLoginLocation="/d2l/lp/auth/login/login.d2l";fullLoginLocation+=queryString;post(fullLoginLocation,username,password)}function navigateIfAuthenticated(){var decodedUrlParams=getUrlParams();var xmlHttp=new XMLHttpRequest;xmlHttp.open("GET","/d2l/lp/auth/customHostedLoginSessionInfo",false);xmlHttp.send();var target="target"in decodedUrlParams?"/d2l/login?target="+encodeURIComponent(decodedUrlParams["target"]):"/d2l/login";try{var response=xmlHttp.responseText?JSON.parse(xmlHttp.responseText):null;if(xmlHttp.status===200&&response&&response.BrowserDisabled){window.top.location.replace("/d2l/systemCheck")}else if(xmlHttp.status===200&&response&&response.LoginSessionExists){window.top.location.replace(target)}}catch(e){console.log("Failed to get login session info: ",e)}}function post(path,username,password){var form=document.createElement("form");form.style.display="none";form.setAttribute("method","post");form.setAttribute("action",path);var hiddenUsername=document.createElement("input");hiddenUsername.setAttribute("type","hidden");hiddenUsername.setAttribute("name","username");hiddenUsername.setAttribute("value",username);form.appendChild(hiddenUsername);var hiddenPassword=document.createElement("input");hiddenPassword.setAttribute("type","hidden");hiddenPassword.setAttribute("name","password");hiddenPassword.setAttribute("value",password);form.appendChild(hiddenPassword);document.body.appendChild(form);form.submit()}function insertFavicon(){var xmlHttp=new XMLHttpRequest;xmlHttp.open("GET","/d2l/lp/web/faviconLocation",true);xmlHttp.onload=function(){if(this.status==200){var link=document.createElement("link");link.type="image/x-icon";link.rel="icon";link.href=this.responseText;document.getElementsByTagName("head")[0].appendChild(link)}};xmlHttp.send()}function passParametersForShibWithInnerTarget(shibLinkId,alreadyParams){if(alreadyParams===undefined){alreadyParams=true}var shibLinkElem=document.getElementById(shibLinkId);if(shibLinkElem){var currentHref=shibLinkElem.getAttribute("href");var startingSymbol=alreadyParams?"&":"?";shibLinkElem.setAttribute("href",currentHref+startingSymbol+"target="+encodeURIComponent("https://"+getDomain()+"/d2l/shibbolethSSO/login.d2l"));passParametersForShib(shibLinkId,false)}}function passParametersForShib(shibLinkId,alreadyParams){var queryString=createQueryString();if(alreadyParams===undefined){alreadyParams=false}var shibLinkElem=document.getElementById(shibLinkId);if(shibLinkElem){var currentHref=shibLinkElem.getAttribute("href");var query=queryString?alreadyParams?"&"+queryString.substring(1):queryString:"";shibLinkElem.setAttribute("href",currentHref+encodeURIComponent(query))}}function passParametersForSaml(samlLinkId,useParamsFromHref){var queryString=createQueryString();if(useParamsFromHref===undefined){useParamsFromHref=false}var samlLinkElem=document.getElementById(samlLinkId);if(samlLinkElem){if(useParamsFromHref){var samlLinkHref=samlLinkElem.getAttribute("href");if(samlLinkHref!==undefined&&samlLinkHref.indexOf("?")!==-1){var samlLinkQuery=samlLinkHref.split("?")[1];if(samlLinkQuery!==""){queryString=queryString!==""?queryString+"&"+samlLinkQuery:"?"+samlLinkQuery}}}var entityId=samlLinkElem.getAttribute("entityId");if(entityId){queryString=queryString!==""?"&"+queryString.substring(1):"";samlLinkElem.setAttribute("href","/d2l/lp/auth/saml/initiate-login?entityId="+entityId+queryString)}else{samlLinkElem.setAttribute("href","/d2l/lp/auth/saml/login"+queryString)}}}function passParametersForCas(casLinkId){var queryString=createQueryString();var casLinkElem=document.getElementById(casLinkId);if(casLinkElem){casLinkElem.setAttribute("href","/d2l/custom/cas"+queryString)}}function passParameters(linkId,alreadyParams){var queryString=createQueryString();if(alreadyParams===undefined){alreadyParams=false}var linkElem=document.getElementById(linkId);if(linkElem){var currentHref=linkElem.getAttribute("href");var query=queryString?alreadyParams?"&"+queryString.substring(1):queryString:"";linkElem.setAttribute("href",currentHref+query)}}function getDomain(){return window.location.host}function handleASPTarget(exclusions){var decodedUrlParams=getUrlParams();if("target"in decodedUrlParams){var target=decodedUrlParams["target"].toLowerCase();for(var exclusion in exclusions){if(target.indexOf(exclusion.toLowerCase())>=0){var path=exclusions[exclusion];delete decodedUrlParams["target"];var newParams=createQueryString(decodedUrlParams);if(path){var newLocation=window.top.location.pathname+path+newParams;window.top.location.replace(newLocation);history.replaceState(null,null,newLocation)}else{history.replaceState(null,null,window.top.location.pathname+newParams)}return}}}}module.exports={handleLogin:handleLogin,insertFavicon:insertFavicon,navigateIfAuthenticated:navigateIfAuthenticated,getDomain:getDomain,getUrlParams:getUrlParams,passParameters:passParameters,createQueryString:createQueryString,passParametersForCas:passParametersForCas,passParametersForSaml:passParametersForSaml,passParametersForShib:passParametersForShib,passParametersForShibWithInnerTarget:passParametersForShibWithInnerTarget,handleASPTarget:handleASPTarget}},{}]},{},[1]);